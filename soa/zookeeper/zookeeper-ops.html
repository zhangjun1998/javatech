<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ZooKeeper è¿ç»´æŒ‡å— | JAVATECH</title>
    <meta name="description" content="Java æ•™ç¨‹">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/javatech/favicon.ico">
    
    <link rel="preload" href="/javatech/assets/css/0.styles.0a04ceb6.css" as="style"><link rel="preload" href="/javatech/assets/js/app.fda27f19.js" as="script"><link rel="preload" href="/javatech/assets/js/4.712970d0.js" as="script"><link rel="preload" href="/javatech/assets/js/60.c674f4b5.js" as="script"><link rel="prefetch" href="/javatech/assets/js/10.27a69910.js"><link rel="prefetch" href="/javatech/assets/js/11.9a90a5e0.js"><link rel="prefetch" href="/javatech/assets/js/12.82ee8f23.js"><link rel="prefetch" href="/javatech/assets/js/13.01fa60c7.js"><link rel="prefetch" href="/javatech/assets/js/14.289ce03a.js"><link rel="prefetch" href="/javatech/assets/js/15.20146332.js"><link rel="prefetch" href="/javatech/assets/js/16.31002576.js"><link rel="prefetch" href="/javatech/assets/js/17.91db155d.js"><link rel="prefetch" href="/javatech/assets/js/18.beb24a84.js"><link rel="prefetch" href="/javatech/assets/js/19.9b63c8bd.js"><link rel="prefetch" href="/javatech/assets/js/20.7b3dd7ca.js"><link rel="prefetch" href="/javatech/assets/js/21.32da2e20.js"><link rel="prefetch" href="/javatech/assets/js/22.e98e166c.js"><link rel="prefetch" href="/javatech/assets/js/23.2de495ed.js"><link rel="prefetch" href="/javatech/assets/js/24.934d13fa.js"><link rel="prefetch" href="/javatech/assets/js/25.d8a9ef4b.js"><link rel="prefetch" href="/javatech/assets/js/26.3e60b6e9.js"><link rel="prefetch" href="/javatech/assets/js/27.03a4cf85.js"><link rel="prefetch" href="/javatech/assets/js/28.85c4983b.js"><link rel="prefetch" href="/javatech/assets/js/29.cfb40647.js"><link rel="prefetch" href="/javatech/assets/js/30.b4406b0c.js"><link rel="prefetch" href="/javatech/assets/js/31.721e5fce.js"><link rel="prefetch" href="/javatech/assets/js/32.61d9d888.js"><link rel="prefetch" href="/javatech/assets/js/33.2e2c17a0.js"><link rel="prefetch" href="/javatech/assets/js/34.a0f94a57.js"><link rel="prefetch" href="/javatech/assets/js/35.609e175d.js"><link rel="prefetch" href="/javatech/assets/js/36.650baca2.js"><link rel="prefetch" href="/javatech/assets/js/37.59188234.js"><link rel="prefetch" href="/javatech/assets/js/38.c3e47159.js"><link rel="prefetch" href="/javatech/assets/js/39.f7622bcc.js"><link rel="prefetch" href="/javatech/assets/js/40.bf0b8425.js"><link rel="prefetch" href="/javatech/assets/js/41.f86852ed.js"><link rel="prefetch" href="/javatech/assets/js/42.058e48bd.js"><link rel="prefetch" href="/javatech/assets/js/43.ecce35ee.js"><link rel="prefetch" href="/javatech/assets/js/44.52f28acf.js"><link rel="prefetch" href="/javatech/assets/js/45.20f4f377.js"><link rel="prefetch" href="/javatech/assets/js/46.0a0260b9.js"><link rel="prefetch" href="/javatech/assets/js/47.eb304074.js"><link rel="prefetch" href="/javatech/assets/js/48.4b44c17f.js"><link rel="prefetch" href="/javatech/assets/js/49.7eb565e9.js"><link rel="prefetch" href="/javatech/assets/js/5.a5e63d96.js"><link rel="prefetch" href="/javatech/assets/js/50.8109a7ae.js"><link rel="prefetch" href="/javatech/assets/js/51.38b085ba.js"><link rel="prefetch" href="/javatech/assets/js/52.00ce2cbc.js"><link rel="prefetch" href="/javatech/assets/js/53.d6d7f478.js"><link rel="prefetch" href="/javatech/assets/js/54.dfdb8d1e.js"><link rel="prefetch" href="/javatech/assets/js/55.1826944b.js"><link rel="prefetch" href="/javatech/assets/js/56.66dbda5d.js"><link rel="prefetch" href="/javatech/assets/js/57.40473993.js"><link rel="prefetch" href="/javatech/assets/js/58.22b1ebc5.js"><link rel="prefetch" href="/javatech/assets/js/59.58783d5e.js"><link rel="prefetch" href="/javatech/assets/js/6.d667bc4d.js"><link rel="prefetch" href="/javatech/assets/js/61.b6341bd9.js"><link rel="prefetch" href="/javatech/assets/js/62.89e2b730.js"><link rel="prefetch" href="/javatech/assets/js/63.0e1450bd.js"><link rel="prefetch" href="/javatech/assets/js/64.c2b3eaf7.js"><link rel="prefetch" href="/javatech/assets/js/65.4faaada8.js"><link rel="prefetch" href="/javatech/assets/js/66.4c312605.js"><link rel="prefetch" href="/javatech/assets/js/67.bf8d7dc4.js"><link rel="prefetch" href="/javatech/assets/js/68.9e1d5c1a.js"><link rel="prefetch" href="/javatech/assets/js/69.717b63a7.js"><link rel="prefetch" href="/javatech/assets/js/7.49d24c76.js"><link rel="prefetch" href="/javatech/assets/js/8.319b7672.js"><link rel="prefetch" href="/javatech/assets/js/9.1c70efd1.js"><link rel="prefetch" href="/javatech/assets/js/vendors~flowchart.f5cdfab1.js"><link rel="prefetch" href="/javatech/assets/js/vendors~notification.7414fc30.js">
    <link rel="stylesheet" href="/javatech/assets/css/0.styles.0a04ceb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javatech/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="JAVATECH" class="logo"> <span class="site-name can-hide">JAVATECH</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javatech/framework/" class="nav-link">
  æ¡†æ¶
</a></div><div class="nav-item"><a href="/javatech/cache/" class="nav-link">
  ç¼“å­˜
</a></div><div class="nav-item"><a href="/javatech/mq/" class="nav-link">
  æ¶ˆæ¯é˜Ÿåˆ—
</a></div><div class="nav-item"><a href="/javatech/search/" class="nav-link">
  æœç´¢å¼•æ“
</a></div><div class="nav-item"><a href="/javatech/storage/" class="nav-link">
  å­˜å‚¨
</a></div><div class="nav-item"><a href="/javatech/soa/" class="nav-link router-link-active">
  å¾®æœåŠ¡
</a></div><div class="nav-item"><a href="/javatech/security/" class="nav-link">
  å®‰å…¨
</a></div><div class="nav-item"><a href="/javatech/test/" class="nav-link">
  æµ‹è¯•
</a></div><div class="nav-item"><a href="/javatech/server/" class="nav-link">
  æœåŠ¡å™¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javatech" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javatech/framework/" class="nav-link">
  æ¡†æ¶
</a></div><div class="nav-item"><a href="/javatech/cache/" class="nav-link">
  ç¼“å­˜
</a></div><div class="nav-item"><a href="/javatech/mq/" class="nav-link">
  æ¶ˆæ¯é˜Ÿåˆ—
</a></div><div class="nav-item"><a href="/javatech/search/" class="nav-link">
  æœç´¢å¼•æ“
</a></div><div class="nav-item"><a href="/javatech/storage/" class="nav-link">
  å­˜å‚¨
</a></div><div class="nav-item"><a href="/javatech/soa/" class="nav-link router-link-active">
  å¾®æœåŠ¡
</a></div><div class="nav-item"><a href="/javatech/security/" class="nav-link">
  å®‰å…¨
</a></div><div class="nav-item"><a href="/javatech/test/" class="nav-link">
  æµ‹è¯•
</a></div><div class="nav-item"><a href="/javatech/server/" class="nav-link">
  æœåŠ¡å™¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javatech" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ZooKeeper è¿ç»´æŒ‡å—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_1-å•ç‚¹æœåŠ¡éƒ¨ç½²" class="sidebar-link">1. å•ç‚¹æœåŠ¡éƒ¨ç½²</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_1-1-ä¸‹è½½è§£å‹" class="sidebar-link">1.1. ä¸‹è½½è§£å‹</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_1-2-ç¯å¢ƒå˜é‡" class="sidebar-link">1.2. ç¯å¢ƒå˜é‡</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_1-3-ä¿®æ”¹é…ç½®" class="sidebar-link">1.3. ä¿®æ”¹é…ç½®</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_1-4-å¯åŠ¨æœåŠ¡" class="sidebar-link">1.4. å¯åŠ¨æœåŠ¡</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_1-5-åœæ­¢æœåŠ¡" class="sidebar-link">1.5. åœæ­¢æœåŠ¡</a></li></ul></li><li><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_2-é›†ç¾¤æœåŠ¡éƒ¨ç½²" class="sidebar-link">2. é›†ç¾¤æœåŠ¡éƒ¨ç½²</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_2-1-ä¿®æ”¹é…ç½®" class="sidebar-link">2.1. ä¿®æ”¹é…ç½®</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_2-2-æ ‡è¯†èŠ‚ç‚¹" class="sidebar-link">2.2. æ ‡è¯†èŠ‚ç‚¹</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_2-3-å¯åŠ¨é›†ç¾¤" class="sidebar-link">2.3. å¯åŠ¨é›†ç¾¤</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_2-4-é›†ç¾¤éªŒè¯" class="sidebar-link">2.4. é›†ç¾¤éªŒè¯</a></li></ul></li><li><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_3-å‘½ä»¤" class="sidebar-link">3. å‘½ä»¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_3-1-è¿›å…¥å‘½ä»¤è¡Œæ§åˆ¶å°" class="sidebar-link">3.1. è¿›å…¥å‘½ä»¤è¡Œæ§åˆ¶å°</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_3-2-èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥" class="sidebar-link">3.2. èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_3-3-ç›‘å¬å™¨" class="sidebar-link">3.3. ç›‘å¬å™¨</a></li><li class="sidebar-sub-header"><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_3-4-zookeeper-å››å­—å‘½ä»¤" class="sidebar-link">3.4. zookeeper å››å­—å‘½ä»¤</a></li></ul></li><li><a href="/javatech/soa/zookeeper/zookeeper-ops.html#_4-å‚è€ƒèµ„æ–™" class="sidebar-link">4. å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zookeeper-è¿ç»´æŒ‡å—"><a href="#zookeeper-è¿ç»´æŒ‡å—" class="header-anchor">#</a> ZooKeeper è¿ç»´æŒ‡å—</h1> <blockquote><p>ç¯å¢ƒè¦æ±‚ï¼šJDK6+</p></blockquote> <ul><li><a href="#1-%E5%8D%95%E7%82%B9%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2">1. å•ç‚¹æœåŠ¡éƒ¨ç½²</a> <ul><li><a href="#11-%E4%B8%8B%E8%BD%BD%E8%A7%A3%E5%8E%8B">1.1. ä¸‹è½½è§£å‹</a></li> <li><a href="#12-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">1.2. ç¯å¢ƒå˜é‡</a></li> <li><a href="#13-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE">1.3. ä¿®æ”¹é…ç½®</a></li> <li><a href="#14-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1">1.4. å¯åŠ¨æœåŠ¡</a></li> <li><a href="#15-%E5%81%9C%E6%AD%A2%E6%9C%8D%E5%8A%A1">1.5. åœæ­¢æœåŠ¡</a></li></ul></li> <li><a href="#2-%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2">2. é›†ç¾¤æœåŠ¡éƒ¨ç½²</a> <ul><li><a href="#21-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE">2.1. ä¿®æ”¹é…ç½®</a></li> <li><a href="#22-%E6%A0%87%E8%AF%86%E8%8A%82%E7%82%B9">2.2. æ ‡è¯†èŠ‚ç‚¹</a></li> <li><a href="#23-%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4">2.3. å¯åŠ¨é›†ç¾¤</a></li> <li><a href="#24-%E9%9B%86%E7%BE%A4%E9%AA%8C%E8%AF%81">2.4. é›†ç¾¤éªŒè¯</a></li></ul></li> <li><a href="#3-%E5%91%BD%E4%BB%A4">3. å‘½ä»¤</a> <ul><li><a href="#31-%E8%BF%9B%E5%85%A5%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8E%A7%E5%88%B6%E5%8F%B0">3.1. è¿›å…¥å‘½ä»¤è¡Œæ§åˆ¶å°</a></li> <li><a href="#32-%E8%8A%82%E7%82%B9%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5">3.2. èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥</a></li> <li><a href="#33-%E7%9B%91%E5%90%AC%E5%99%A8">3.3. ç›‘å¬å™¨</a></li> <li><a href="#34-zookeeper-%E5%9B%9B%E5%AD%97%E5%91%BD%E4%BB%A4">3.4. zookeeper å››å­—å‘½ä»¤</a></li></ul></li> <li><a href="#4-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">4. å‚è€ƒèµ„æ–™</a></li></ul> <h2 id="_1-å•ç‚¹æœåŠ¡éƒ¨ç½²"><a href="#_1-å•ç‚¹æœåŠ¡éƒ¨ç½²" class="header-anchor">#</a> 1. å•ç‚¹æœåŠ¡éƒ¨ç½²</h2> <p>åœ¨å®‰è£… ZooKeeper ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿæ˜¯åœ¨ä»¥ä¸‹ä»»ä¸€æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼š</p> <ul><li><strong>ä»»æ„ Linux OS</strong> - æ”¯æŒå¼€å‘å’Œéƒ¨ç½²ã€‚é€‚åˆæ¼”ç¤ºåº”ç”¨ç¨‹åºã€‚</li> <li><strong>Windows OS</strong> - ä»…æ”¯æŒå¼€å‘ã€‚</li> <li><strong>Mac OS</strong> - ä»…æ”¯æŒå¼€å‘ã€‚</li></ul> <p>å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p> <h3 id="_1-1-ä¸‹è½½è§£å‹"><a href="#_1-1-ä¸‹è½½è§£å‹" class="header-anchor">#</a> 1.1. ä¸‹è½½è§£å‹</h3> <p>è¿›å…¥å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="http://zookeeper.apache.org/releases.html#download" target="_blank" rel="noopener noreferrer">http://zookeeper.apache.org/releases.html#download<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ï¼Œé€‰æ‹©åˆé€‚ç‰ˆæœ¬ã€‚</p> <p>è§£å‹åˆ°æœ¬åœ°ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">tar</span> -zxf zookeeper-3.4.6.tar.gz
<span class="token builtin class-name">cd</span> zookeeper-3.4.6
</code></pre></div><h3 id="_1-2-ç¯å¢ƒå˜é‡"><a href="#_1-2-ç¯å¢ƒå˜é‡" class="header-anchor">#</a> 1.2. ç¯å¢ƒå˜é‡</h3> <p>æ‰§è¡Œ <code>vim /etc/profile</code>ï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">ZOOKEEPER_HOME</span><span class="token operator">=</span>/usr/app/zookeeper-3.4.14
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$ZOOKEEPER_HOME</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre></div><p>å†æ‰§è¡Œ <code>source /etc/profile</code> ï¼Œ ä½¿å¾—é…ç½®çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚</p> <h3 id="_1-3-ä¿®æ”¹é…ç½®"><a href="#_1-3-ä¿®æ”¹é…ç½®" class="header-anchor">#</a> 1.3. ä¿®æ”¹é…ç½®</h3> <p>ä½ å¿…é¡»åˆ›å»º <code>conf/zoo.cfg</code> æ–‡ä»¶ï¼Œå¦åˆ™å¯åŠ¨æ—¶ä¼šæç¤ºä½ æ²¡æœ‰æ­¤æ–‡ä»¶ã€‚</p> <p>åˆæ¬¡å°è¯•ï¼Œä¸å¦¨ç›´æ¥ä½¿ç”¨ Kafka æä¾›çš„æ¨¡æ¿é…ç½®æ–‡ä»¶ <code>conf/zoo_sample.cfg</code>ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cp</span> conf/zoo_sample.cfg conf/zoo.cfg
</code></pre></div><p>ä¿®æ”¹åå®Œæ•´é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># The number of milliseconds of each tick</span>
<span class="token attr-name">tickTime</span><span class="token punctuation">=</span><span class="token attr-value">2000</span>
<span class="token comment"># The number of ticks that the initial</span>
<span class="token comment"># synchronization phase can take</span>
<span class="token attr-name">initLimit</span><span class="token punctuation">=</span><span class="token attr-value">10</span>
<span class="token comment"># The number of ticks that can pass between</span>
<span class="token comment"># sending a request and getting an acknowledgement</span>
<span class="token attr-name">syncLimit</span><span class="token punctuation">=</span><span class="token attr-value">5</span>
<span class="token comment"># the directory where the snapshot is stored.</span>
<span class="token comment"># do not use /tmp for storage, /tmp here is just</span>
<span class="token comment"># example sakes.</span>
<span class="token attr-name">dataDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/zookeeper/data</span>
<span class="token attr-name">dataLogDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/zookeeper/log</span>
<span class="token comment"># the port at which the clients will connect</span>
<span class="token attr-name">clientPort</span><span class="token punctuation">=</span><span class="token attr-value">2181</span>
<span class="token comment"># the maximum number of client connections.</span>
<span class="token comment"># increase this if you need to handle more clients</span>
<span class="token comment">#maxClientCnxns=60</span>
<span class="token comment">#</span>
<span class="token comment"># Be sure to read the maintenance section of the</span>
<span class="token comment"># administrator guide before turning on autopurge.</span>
<span class="token comment">#</span>
<span class="token comment"># http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance</span>
<span class="token comment">#</span>
<span class="token comment"># The number of snapshots to retain in dataDir</span>
<span class="token comment">#autopurge.snapRetainCount=3</span>
<span class="token comment"># Purge task interval in hours</span>
<span class="token comment"># Set to &quot;0&quot; to disable auto purge feature</span>
<span class="token comment">#autopurge.purgeInterval=1</span>
</code></pre></div><p>é…ç½®å‚æ•°è¯´æ˜ï¼š</p> <ul><li><strong>tickTime</strong>ï¼šç”¨äºè®¡ç®—çš„åŸºç¡€æ—¶é—´å•å…ƒã€‚æ¯”å¦‚ session è¶…æ—¶ï¼šN*tickTimeï¼›</li> <li><strong>initLimit</strong>ï¼šç”¨äºé›†ç¾¤ï¼Œå…è®¸ä»èŠ‚ç‚¹è¿æ¥å¹¶åŒæ­¥åˆ° master èŠ‚ç‚¹çš„åˆå§‹åŒ–è¿æ¥æ—¶é—´ï¼Œä»¥ tickTime çš„å€æ•°æ¥è¡¨ç¤ºï¼›</li> <li><strong>syncLimit</strong>ï¼šç”¨äºé›†ç¾¤ï¼Œ master ä¸»èŠ‚ç‚¹ä¸ä»èŠ‚ç‚¹ä¹‹é—´å‘é€æ¶ˆæ¯ï¼Œè¯·æ±‚å’Œåº”ç­”æ—¶é—´é•¿åº¦ï¼ˆå¿ƒè·³æœºåˆ¶ï¼‰ï¼›</li> <li><strong>dataDir</strong>ï¼šæ•°æ®å­˜å‚¨ä½ç½®ï¼›</li> <li><strong>dataLogDir</strong>ï¼šæ—¥å¿—ç›®å½•ï¼›</li> <li><strong>clientPort</strong>ï¼šç”¨äºå®¢æˆ·ç«¯è¿æ¥çš„ç«¯å£ï¼Œé»˜è®¤ 2181</li></ul> <h3 id="_1-4-å¯åŠ¨æœåŠ¡"><a href="#_1-4-å¯åŠ¨æœåŠ¡" class="header-anchor">#</a> 1.4. å¯åŠ¨æœåŠ¡</h3> <p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p> <div class="language-bash extra-class"><pre class="language-bash"><code>bin/zkServer.sh start
</code></pre></div><p>æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œä½ å°†æ”¶åˆ°ä»¥ä¸‹å“åº”</p> <div class="language-bash extra-class"><pre class="language-bash"><code>JMX enabled by default
Using config: /Users/<span class="token punctuation">..</span>/zookeeper-3.4.6/bin/<span class="token punctuation">..</span>/conf/zoo.cfg
Starting zookeeper <span class="token punctuation">..</span>. STARTED
</code></pre></div><h3 id="_1-5-åœæ­¢æœåŠ¡"><a href="#_1-5-åœæ­¢æœåŠ¡" class="header-anchor">#</a> 1.5. åœæ­¢æœåŠ¡</h3> <p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœæ­¢ zookeeper æœåŠ¡å™¨ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>bin/zkServer.sh stop
</code></pre></div><h2 id="_2-é›†ç¾¤æœåŠ¡éƒ¨ç½²"><a href="#_2-é›†ç¾¤æœåŠ¡éƒ¨ç½²" class="header-anchor">#</a> 2. é›†ç¾¤æœåŠ¡éƒ¨ç½²</h2> <p>åˆ†å¸ƒå¼ç³»ç»ŸèŠ‚ç‚¹æ•°ä¸€èˆ¬éƒ½è¦æ±‚æ˜¯å¥‡æ•°ï¼Œä¸”æœ€å°‘ä¸º 3 ä¸ªèŠ‚ç‚¹ï¼ŒZookeeper ä¹Ÿä¸ä¾‹å¤–ã€‚</p> <p>è¿™é‡Œï¼Œè§„åˆ’ä¸€ä¸ªå« 3 ä¸ªèŠ‚ç‚¹çš„æœ€å° ZooKeeper é›†ç¾¤ï¼Œä¸»æœºååˆ†åˆ«ä¸º hadoop001ï¼Œhadoop002ï¼Œhadoop003 ã€‚</p> <h3 id="_2-1-ä¿®æ”¹é…ç½®"><a href="#_2-1-ä¿®æ”¹é…ç½®" class="header-anchor">#</a> 2.1. ä¿®æ”¹é…ç½®</h3> <p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>zoo.cfg</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">tickTime</span><span class="token punctuation">=</span><span class="token attr-value">2000</span>
<span class="token attr-name">initLimit</span><span class="token punctuation">=</span><span class="token attr-value">10</span>
<span class="token attr-name">syncLimit</span><span class="token punctuation">=</span><span class="token attr-value">5</span>
<span class="token attr-name">dataDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/zookeeper-cluster/data/</span>
<span class="token attr-name">dataLogDir</span><span class="token punctuation">=</span><span class="token attr-value">/usr/local/zookeeper-cluster/log/</span>
<span class="token attr-name">clientPort</span><span class="token punctuation">=</span><span class="token attr-value">2181</span>

<span class="token comment"># server.1 è¿™ä¸ª1æ˜¯æœåŠ¡å™¨çš„æ ‡è¯†ï¼Œå¯ä»¥æ˜¯ä»»æ„æœ‰æ•ˆæ•°å­—ï¼Œæ ‡è¯†è¿™æ˜¯ç¬¬å‡ ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ ‡è¯†è¦å†™åˆ°dataDirç›®å½•ä¸‹é¢myidæ–‡ä»¶é‡Œ</span>
<span class="token comment"># æŒ‡åé›†ç¾¤é—´é€šè®¯ç«¯å£å’Œé€‰ä¸¾ç«¯å£</span>
<span class="token attr-name">server.1</span><span class="token punctuation">=</span><span class="token attr-value">hadoop001:2287:3387</span>
<span class="token attr-name">server.2</span><span class="token punctuation">=</span><span class="token attr-value">hadoop002:2287:3387</span>
<span class="token attr-name">server.3</span><span class="token punctuation">=</span><span class="token attr-value">hadoop003:2287:3387</span>
</code></pre></div><h3 id="_2-2-æ ‡è¯†èŠ‚ç‚¹"><a href="#_2-2-æ ‡è¯†èŠ‚ç‚¹" class="header-anchor">#</a> 2.2. æ ‡è¯†èŠ‚ç‚¹</h3> <p>åˆ†åˆ«åœ¨ä¸‰å°ä¸»æœºçš„ <code>dataDir</code> ç›®å½•ä¸‹æ–°å»º <code>myid</code> æ–‡ä»¶,å¹¶å†™å…¥å¯¹åº”çš„èŠ‚ç‚¹æ ‡è¯†ã€‚Zookeeper é›†ç¾¤é€šè¿‡ <code>myid</code> æ–‡ä»¶è¯†åˆ«é›†ç¾¤èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ä¸Šæ–‡é…ç½®çš„èŠ‚ç‚¹é€šä¿¡ç«¯å£å’Œé€‰ä¸¾ç«¯å£æ¥è¿›è¡ŒèŠ‚ç‚¹é€šä¿¡ï¼Œé€‰ä¸¾å‡º Leader èŠ‚ç‚¹ã€‚</p> <p>åˆ›å»ºå­˜å‚¨ç›®å½•ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># ä¸‰å°ä¸»æœºå‡æ‰§è¡Œè¯¥å‘½ä»¤</span>
<span class="token function">mkdir</span> -vp  /usr/local/zookeeper-cluster/data/
</code></pre></div><p>åˆ›å»ºå¹¶å†™å…¥èŠ‚ç‚¹æ ‡è¯†åˆ° <code>myid</code> æ–‡ä»¶ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># hadoop001ä¸»æœº</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;1&quot;</span> <span class="token operator">&gt;</span> /usr/local/zookeeper-cluster/data/myid
<span class="token comment"># hadoop002ä¸»æœº</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;2&quot;</span> <span class="token operator">&gt;</span> /usr/local/zookeeper-cluster/data/myid
<span class="token comment"># hadoop003ä¸»æœº</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;3&quot;</span> <span class="token operator">&gt;</span> /usr/local/zookeeper-cluster/data/myid
</code></pre></div><h3 id="_2-3-å¯åŠ¨é›†ç¾¤"><a href="#_2-3-å¯åŠ¨é›†ç¾¤" class="header-anchor">#</a> 2.3. å¯åŠ¨é›†ç¾¤</h3> <p>åˆ†åˆ«åœ¨ä¸‰å°ä¸»æœºä¸Šï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/usr/app/zookeeper-cluster/zookeeper/bin/zkServer.sh start
</code></pre></div><h3 id="_2-4-é›†ç¾¤éªŒè¯"><a href="#_2-4-é›†ç¾¤éªŒè¯" class="header-anchor">#</a> 2.4. é›†ç¾¤éªŒè¯</h3> <p>å¯åŠ¨åä½¿ç”¨ <code>zkServer.sh status</code> æŸ¥çœ‹é›†ç¾¤å„ä¸ªèŠ‚ç‚¹çŠ¶æ€ã€‚</p> <h2 id="_3-å‘½ä»¤"><a href="#_3-å‘½ä»¤" class="header-anchor">#</a> 3. å‘½ä»¤</h2> <h3 id="_3-1-è¿›å…¥å‘½ä»¤è¡Œæ§åˆ¶å°"><a href="#_3-1-è¿›å…¥å‘½ä»¤è¡Œæ§åˆ¶å°" class="header-anchor">#</a> 3.1. è¿›å…¥å‘½ä»¤è¡Œæ§åˆ¶å°</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>bin/zkCli.sh
</code></pre></div><p>é”®å…¥ä¸Šè¿°å‘½ä»¤åï¼Œå°†è¿æ¥åˆ° ZooKeeper æœåŠ¡å™¨ï¼Œä½ åº”è¯¥å¾—åˆ°ä»¥ä¸‹å“åº”ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Connecting to localhost:2181
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Welcome to ZooKeeper<span class="token operator">!</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
WATCHER::
WatchedEvent state:SyncConnected type: None path:null
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">]</span>
</code></pre></div><h3 id="_3-2-èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥"><a href="#_3-2-èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥" class="header-anchor">#</a> 3.2. èŠ‚ç‚¹å¢åˆ æ”¹æŸ¥</h3> <h4 id="_3-2-1-å¯åŠ¨æœåŠ¡å’Œè¿æ¥æœåŠ¡"><a href="#_3-2-1-å¯åŠ¨æœåŠ¡å’Œè¿æ¥æœåŠ¡" class="header-anchor">#</a> 3.2.1. å¯åŠ¨æœåŠ¡å’Œè¿æ¥æœåŠ¡</h4> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># å¯åŠ¨æœåŠ¡</span>
bin/zkServer.sh start

<span class="token comment">#è¿æ¥æœåŠ¡ ä¸æŒ‡å®šæœåŠ¡åœ°å€åˆ™é»˜è®¤è¿æ¥åˆ°localhost:2181</span>
zkCli.sh -server hadoop001:2181
</code></pre></div><h4 id="_3-2-2-help-å‘½ä»¤"><a href="#_3-2-2-help-å‘½ä»¤" class="header-anchor">#</a> 3.2.2. help å‘½ä»¤</h4> <p>ä½¿ç”¨ <code>help</code> å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤åŠæ ¼å¼ã€‚</p> <h4 id="_3-2-3-æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨"><a href="#_3-2-3-æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨" class="header-anchor">#</a> 3.2.3. æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨</h4> <p>æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨æœ‰ <code>ls path</code> å’Œ <code>ls2 path</code> ä¸¤ä¸ªå‘½ä»¤ï¼Œåè€…æ˜¯å‰è€…çš„å¢å¼ºï¼Œä¸ä»…å¯ä»¥æŸ¥çœ‹æŒ‡å®šè·¯å¾„ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token function">ls</span> /
<span class="token punctuation">[</span>cluster, controller_epoch, brokers, storm, zookeeper, admin,  <span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">]</span> ls2 /
<span class="token punctuation">[</span>cluster, controller_epoch, brokers, storm, zookeeper, admin, <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">]</span>
cZxid <span class="token operator">=</span> 0x0
ctime <span class="token operator">=</span> Thu Jan 01 08:00:00 CST <span class="token number">1970</span>
mZxid <span class="token operator">=</span> 0x0
mtime <span class="token operator">=</span> Thu Jan 01 08:00:00 CST <span class="token number">1970</span>
pZxid <span class="token operator">=</span> 0x130
cversion <span class="token operator">=</span> <span class="token number">19</span>
dataVersion <span class="token operator">=</span> <span class="token number">0</span>
aclVersion <span class="token operator">=</span> <span class="token number">0</span>
ephemeralOwner <span class="token operator">=</span> 0x0
dataLength <span class="token operator">=</span> <span class="token number">0</span>
numChildren <span class="token operator">=</span> <span class="token number">11</span>
</code></pre></div><h4 id="_3-2-4-æ–°å¢èŠ‚ç‚¹"><a href="#_3-2-4-æ–°å¢èŠ‚ç‚¹" class="header-anchor">#</a> 3.2.4. æ–°å¢èŠ‚ç‚¹</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>create <span class="token punctuation">[</span>-s<span class="token punctuation">]</span> <span class="token punctuation">[</span>-e<span class="token punctuation">]</span> path data acl   <span class="token comment"># å…¶ä¸­ -s ä¸ºæœ‰åºèŠ‚ç‚¹ï¼Œ-e ä¸´æ—¶èŠ‚ç‚¹</span>
</code></pre></div><p>flag å‚æ•°æŒ‡å®šåˆ›å»ºçš„ znode æ˜¯æŒä¹…çš„ã€ä¸´æ—¶çš„ï¼ˆ-eï¼‰ï¼Œè¿˜æ˜¯é¡ºåºçš„ï¼ˆ-sï¼‰ã€‚</p> <ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ znode éƒ½æ˜¯æŒä¹…çš„ã€‚</li> <li>é¡ºåºèŠ‚ç‚¹ä¿è¯ znode è·¯å¾„å°†æ˜¯å”¯ä¸€çš„ã€‚</li> <li>ä¸´æ—¶èŠ‚ç‚¹ä¼šåœ¨ä¼šè¯è¿‡æœŸæˆ–å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶è¢«è‡ªåŠ¨åˆ é™¤ã€‚</li></ul> <p>ä¾‹ï¼šåˆ›å»ºæŒä¹…èŠ‚ç‚¹</p> <div class="language-bash extra-class"><pre class="language-bash"><code>create /hadoop <span class="token number">123456</span>
</code></pre></div><p>ä¾‹ï¼šåˆ›å»ºæœ‰åºèŠ‚ç‚¹ï¼Œæ­¤æ—¶åˆ›å»ºçš„èŠ‚ç‚¹åä¸ºæŒ‡å®šèŠ‚ç‚¹å + è‡ªå¢åºå·ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">23</span><span class="token punctuation">]</span> create -s /a  <span class="token string">&quot;aaa&quot;</span>
Created /a0000000022
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">24</span><span class="token punctuation">]</span> create -s /b  <span class="token string">&quot;bbb&quot;</span>
Created /b0000000023
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">25</span><span class="token punctuation">]</span> create -s /c  <span class="token string">&quot;ccc&quot;</span>
Created /c0000000024
</code></pre></div><p>ä¾‹ï¼šåˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">26</span><span class="token punctuation">]</span> create -e /tmp  <span class="token string">&quot;tmp&quot;</span>
Created /tmp
</code></pre></div><h4 id="_3-2-5-æŸ¥çœ‹èŠ‚ç‚¹"><a href="#_3-2-5-æŸ¥çœ‹èŠ‚ç‚¹" class="header-anchor">#</a> 3.2.5. æŸ¥çœ‹èŠ‚ç‚¹</h4> <h5 id="è·å–èŠ‚ç‚¹æ•°æ®"><a href="#è·å–èŠ‚ç‚¹æ•°æ®" class="header-anchor">#</a> è·å–èŠ‚ç‚¹æ•°æ®</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># æ ¼å¼</span>
get path <span class="token punctuation">[</span>watch<span class="token punctuation">]</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">31</span><span class="token punctuation">]</span> get /hadoop
<span class="token number">123456</span>   <span class="token comment">#èŠ‚ç‚¹æ•°æ®</span>
cZxid <span class="token operator">=</span> 0x14b
ctime <span class="token operator">=</span> Fri May <span class="token number">24</span> <span class="token number">17</span>:03:06 CST <span class="token number">2019</span>
mZxid <span class="token operator">=</span> 0x14b
mtime <span class="token operator">=</span> Fri May <span class="token number">24</span> <span class="token number">17</span>:03:06 CST <span class="token number">2019</span>
pZxid <span class="token operator">=</span> 0x14b
cversion <span class="token operator">=</span> <span class="token number">0</span>
dataVersion <span class="token operator">=</span> <span class="token number">0</span>
aclVersion <span class="token operator">=</span> <span class="token number">0</span>
ephemeralOwner <span class="token operator">=</span> 0x0
dataLength <span class="token operator">=</span> <span class="token number">6</span>
numChildren <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><p>èŠ‚ç‚¹å„ä¸ªå±æ€§å¦‚ä¸‹è¡¨ã€‚å…¶ä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µæ˜¯ Zxid(ZooKeeper Transaction Id)ï¼ŒZooKeeper èŠ‚ç‚¹çš„æ¯ä¸€æ¬¡æ›´æ”¹éƒ½å…·æœ‰å”¯ä¸€çš„ Zxidï¼Œå¦‚æœ Zxid1 å°äº Zxid2ï¼Œåˆ™ Zxid1 çš„æ›´æ”¹å‘ç”Ÿåœ¨ Zxid2 æ›´æ”¹ä¹‹å‰ã€‚</p> <table><thead><tr><th><strong>çŠ¶æ€å±æ€§</strong></th> <th><strong>è¯´æ˜</strong></th></tr></thead> <tbody><tr><td>cZxid</td> <td>æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„äº‹åŠ¡ ID</td></tr> <tr><td>ctime</td> <td>æ•°æ®èŠ‚ç‚¹åˆ›å»ºæ—¶çš„æ—¶é—´</td></tr> <tr><td>mZxid</td> <td>æ•°æ®èŠ‚ç‚¹æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„äº‹åŠ¡ ID</td></tr> <tr><td>mtime</td> <td>æ•°æ®èŠ‚ç‚¹æœ€åä¸€æ¬¡æ›´æ–°æ—¶çš„æ—¶é—´</td></tr> <tr><td>pZxid</td> <td>æ•°æ®èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ€åä¸€æ¬¡è¢«ä¿®æ”¹æ—¶çš„äº‹åŠ¡ ID</td></tr> <tr><td>cversion</td> <td>å­èŠ‚ç‚¹çš„æ›´æ”¹æ¬¡æ•°</td></tr> <tr><td>dataVersion</td> <td>èŠ‚ç‚¹æ•°æ®çš„æ›´æ”¹æ¬¡æ•°</td></tr> <tr><td>aclVersion</td> <td>èŠ‚ç‚¹çš„ ACL çš„æ›´æ”¹æ¬¡æ•°</td></tr> <tr><td>ephemeralOwner</td> <td>å¦‚æœèŠ‚ç‚¹æ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œåˆ™è¡¨ç¤ºåˆ›å»ºè¯¥èŠ‚ç‚¹çš„ä¼šè¯çš„ SessionIDï¼›å¦‚æœèŠ‚ç‚¹æ˜¯æŒä¹…èŠ‚ç‚¹ï¼Œåˆ™è¯¥å±æ€§å€¼ä¸º 0</td></tr> <tr><td>dataLength</td> <td>æ•°æ®å†…å®¹çš„é•¿åº¦</td></tr> <tr><td>numChildren</td> <td>æ•°æ®èŠ‚ç‚¹å½“å‰çš„å­èŠ‚ç‚¹ä¸ªæ•°</td></tr></tbody></table> <h5 id="æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€"><a href="#æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€" class="header-anchor">#</a> æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€</h5> <p>å¯ä»¥ä½¿ç”¨ <code>stat</code> å‘½ä»¤æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€ï¼Œå®ƒçš„è¿”å›å€¼å’Œ <code>get</code> å‘½ä»¤ç±»ä¼¼ï¼Œä½†ä¸ä¼šè¿”å›èŠ‚ç‚¹æ•°æ®ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">32</span><span class="token punctuation">]</span> <span class="token function">stat</span> /hadoop
cZxid <span class="token operator">=</span> 0x14b
ctime <span class="token operator">=</span> Fri May <span class="token number">24</span> <span class="token number">17</span>:03:06 CST <span class="token number">2019</span>
mZxid <span class="token operator">=</span> 0x14b
mtime <span class="token operator">=</span> Fri May <span class="token number">24</span> <span class="token number">17</span>:03:06 CST <span class="token number">2019</span>
pZxid <span class="token operator">=</span> 0x14b
cversion <span class="token operator">=</span> <span class="token number">0</span>
dataVersion <span class="token operator">=</span> <span class="token number">0</span>
aclVersion <span class="token operator">=</span> <span class="token number">0</span>
ephemeralOwner <span class="token operator">=</span> 0x0
dataLength <span class="token operator">=</span> <span class="token number">6</span>
numChildren <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><h4 id="_3-2-6-æ›´æ–°èŠ‚ç‚¹"><a href="#_3-2-6-æ›´æ–°èŠ‚ç‚¹" class="header-anchor">#</a> 3.2.6. æ›´æ–°èŠ‚ç‚¹</h4> <p>æ›´æ–°èŠ‚ç‚¹çš„å‘½ä»¤æ˜¯ <code>set</code>ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">33</span><span class="token punctuation">]</span> <span class="token builtin class-name">set</span> /hadoop <span class="token number">345</span>
cZxid <span class="token operator">=</span> 0x14b
ctime <span class="token operator">=</span> Fri May <span class="token number">24</span> <span class="token number">17</span>:03:06 CST <span class="token number">2019</span>
mZxid <span class="token operator">=</span> 0x14c
mtime <span class="token operator">=</span> Fri May <span class="token number">24</span> <span class="token number">17</span>:13:05 CST <span class="token number">2019</span>
pZxid <span class="token operator">=</span> 0x14b
cversion <span class="token operator">=</span> <span class="token number">0</span>
dataVersion <span class="token operator">=</span> <span class="token number">1</span>  <span class="token comment"># æ³¨æ„æ›´æ”¹åæ­¤æ—¶ç‰ˆæœ¬å·ä¸º 1ï¼Œé»˜è®¤åˆ›å»ºæ—¶ä¸º 0</span>
aclVersion <span class="token operator">=</span> <span class="token number">0</span>
ephemeralOwner <span class="token operator">=</span> 0x0
dataLength <span class="token operator">=</span> <span class="token number">3</span>
numChildren <span class="token operator">=</span> <span class="token number">0</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥åŸºäºç‰ˆæœ¬å·è¿›è¡Œæ›´æ”¹ï¼Œæ­¤æ—¶ç±»ä¼¼äºä¹è§‚é”æœºåˆ¶ï¼Œå½“ä½ ä¼ å…¥çš„æ•°æ®ç‰ˆæœ¬å· (dataVersion) å’Œå½“å‰èŠ‚ç‚¹çš„æ•°æ®ç‰ˆæœ¬å·ä¸ç¬¦åˆæ—¶ï¼Œzookeeper ä¼šæ‹’ç»æœ¬æ¬¡ä¿®æ”¹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">34</span><span class="token punctuation">]</span> <span class="token builtin class-name">set</span> /hadoop <span class="token number">678</span> <span class="token number">0</span>
version No is not valid <span class="token builtin class-name">:</span> /hadoop    <span class="token comment">#æ— æ•ˆçš„ç‰ˆæœ¬å·</span>
</code></pre></div><h4 id="_3-2-7-åˆ é™¤èŠ‚ç‚¹"><a href="#_3-2-7-åˆ é™¤èŠ‚ç‚¹" class="header-anchor">#</a> 3.2.7. åˆ é™¤èŠ‚ç‚¹</h4> <p>åˆ é™¤èŠ‚ç‚¹çš„è¯­æ³•å¦‚ä¸‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code>delete path <span class="token punctuation">[</span>version<span class="token punctuation">]</span>
</code></pre></div><p>å’Œæ›´æ–°èŠ‚ç‚¹æ•°æ®ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ç‰ˆæœ¬å·ï¼Œå½“ä½ ä¼ å…¥çš„æ•°æ®ç‰ˆæœ¬å· (dataVersion) å’Œå½“å‰èŠ‚ç‚¹çš„æ•°æ®ç‰ˆæœ¬å·ä¸ç¬¦åˆæ—¶ï¼Œzookeeper ä¸ä¼šæ‰§è¡Œåˆ é™¤æ“ä½œã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">36</span><span class="token punctuation">]</span> delete /hadoop <span class="token number">0</span>
version No is not valid <span class="token builtin class-name">:</span> /hadoop   <span class="token comment">#æ— æ•ˆçš„ç‰ˆæœ¬å·</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">37</span><span class="token punctuation">]</span> delete /hadoop <span class="token number">1</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">38</span><span class="token punctuation">]</span>
</code></pre></div><p>è¦æƒ³åˆ é™¤æŸä¸ªèŠ‚ç‚¹åŠå…¶æ‰€æœ‰åä»£èŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨é€’å½’åˆ é™¤ï¼Œå‘½ä»¤ä¸º <code>rmr path</code>ã€‚</p> <h3 id="_3-3-ç›‘å¬å™¨"><a href="#_3-3-ç›‘å¬å™¨" class="header-anchor">#</a> 3.3. ç›‘å¬å™¨</h3> <h4 id="_3-3-1-get-path"><a href="#_3-3-1-get-path" class="header-anchor">#</a> 3.3.1. get path</h4> <p>ä½¿ç”¨ <code>get path [watch]</code> æ³¨å†Œçš„ç›‘å¬å™¨èƒ½å¤Ÿåœ¨èŠ‚ç‚¹å†…å®¹å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºé€šçŸ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ zookeeper çš„è§¦å‘å™¨æ˜¯ä¸€æ¬¡æ€§çš„ (One-time trigger)ï¼Œå³è§¦å‘ä¸€æ¬¡åå°±ä¼šç«‹å³å¤±æ•ˆã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">4</span><span class="token punctuation">]</span> get /hadoop  <span class="token function">watch</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token builtin class-name">set</span> /hadoop <span class="token number">45678</span>
WATCHER::
WatchedEvent state:SyncConnected type:NodeDataChanged path:/hadoop  <span class="token comment">#èŠ‚ç‚¹å€¼æ”¹å˜</span>
</code></pre></div><h4 id="_3-3-2-stat-path"><a href="#_3-3-2-stat-path" class="header-anchor">#</a> 3.3.2. stat path</h4> <p>ä½¿ç”¨ <code>stat path [watch]</code> æ³¨å†Œçš„ç›‘å¬å™¨èƒ½å¤Ÿåœ¨èŠ‚ç‚¹çŠ¶æ€å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå‘å®¢æˆ·ç«¯å‘å‡ºé€šçŸ¥ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">7</span><span class="token punctuation">]</span> <span class="token function">stat</span> /hadoop <span class="token function">watch</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token builtin class-name">set</span> /hadoop <span class="token number">112233</span>
WATCHER::
WatchedEvent state:SyncConnected type:NodeDataChanged path:/hadoop  <span class="token comment">#èŠ‚ç‚¹å€¼æ”¹å˜</span>
</code></pre></div><h4 id="_3-3-3-ls-ls2-path"><a href="#_3-3-3-ls-ls2-path" class="header-anchor">#</a> 3.3.3. ls\ls2 path</h4> <p>ä½¿ç”¨ <code>ls path [watch]</code> æˆ– <code>ls2 path [watch]</code> æ³¨å†Œçš„ç›‘å¬å™¨èƒ½å¤Ÿç›‘å¬è¯¥èŠ‚ç‚¹ä¸‹æ‰€æœ‰<strong>å­èŠ‚ç‚¹</strong>çš„å¢åŠ å’Œåˆ é™¤æ“ä½œã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">9</span><span class="token punctuation">]</span> <span class="token function">ls</span> /hadoop <span class="token function">watch</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">10</span><span class="token punctuation">]</span> create  /hadoop/yarn <span class="token string">&quot;aaa&quot;</span>
WATCHER::
WatchedEvent state:SyncConnected type:NodeChildrenChanged path:/hadoop
</code></pre></div><h3 id="_3-4-zookeeper-å››å­—å‘½ä»¤"><a href="#_3-4-zookeeper-å››å­—å‘½ä»¤" class="header-anchor">#</a> 3.4. zookeeper å››å­—å‘½ä»¤</h3> <table><thead><tr><th>å‘½ä»¤</th> <th>åŠŸèƒ½æè¿°</th></tr></thead> <tbody><tr><td>conf</td> <td>æ‰“å°æœåŠ¡é…ç½®çš„è¯¦ç»†ä¿¡æ¯ã€‚</td></tr> <tr><td>cons</td> <td>åˆ—å‡ºè¿æ¥åˆ°æ­¤æœåŠ¡å™¨çš„æ‰€æœ‰å®¢æˆ·ç«¯çš„å®Œæ•´è¿æ¥/ä¼šè¯è¯¦ç»†ä¿¡æ¯ã€‚åŒ…æ‹¬æ¥æ”¶/å‘é€çš„æ•°æ®åŒ…æ•°é‡ï¼Œä¼šè¯ IDï¼Œæ“ä½œå»¶è¿Ÿï¼Œä¸Šæ¬¡æ‰§è¡Œçš„æ“ä½œç­‰ä¿¡æ¯ã€‚</td></tr> <tr><td>dump</td> <td>åˆ—å‡ºæœªå®Œæˆçš„ä¼šè¯å’Œä¸´æ—¶èŠ‚ç‚¹ã€‚è¿™åªé€‚ç”¨äº Leader èŠ‚ç‚¹ã€‚</td></tr> <tr><td>envi</td> <td>æ‰“å°æœåŠ¡ç¯å¢ƒçš„è¯¦ç»†ä¿¡æ¯ã€‚</td></tr> <tr><td>ruok</td> <td>æµ‹è¯•æœåŠ¡æ˜¯å¦å¤„äºæ­£ç¡®çŠ¶æ€ã€‚å¦‚æœæ­£ç¡®åˆ™è¿”å›â€œimokâ€ï¼Œå¦åˆ™ä¸åšä»»ä½•ç›¸åº”ã€‚</td></tr> <tr><td>stat</td> <td>åˆ—å‡ºæœåŠ¡å™¨å’Œè¿æ¥å®¢æˆ·ç«¯çš„ç®€è¦è¯¦ç»†ä¿¡æ¯ã€‚</td></tr> <tr><td>wchs</td> <td>åˆ—å‡ºæ‰€æœ‰ watch çš„ç®€å•ä¿¡æ¯ã€‚</td></tr> <tr><td>wchc</td> <td>æŒ‰ä¼šè¯åˆ—å‡ºæœåŠ¡å™¨ watch çš„è¯¦ç»†ä¿¡æ¯ã€‚</td></tr> <tr><td>wchp</td> <td>æŒ‰è·¯å¾„åˆ—å‡ºæœåŠ¡å™¨ watch çš„è¯¦ç»†ä¿¡æ¯ã€‚</td></tr></tbody></table> <blockquote><p>æ›´å¤šå››å­—å‘½ä»¤å¯ä»¥å‚é˜…å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://zookeeper.apache.org/doc/current/zookeeperAdmin.html" target="_blank" rel="noopener noreferrer">https://zookeeper.apache.org/doc/current/zookeeperAdmin.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>ä½¿ç”¨å‰éœ€è¦ä½¿ç”¨ <code>yum install nc</code> å®‰è£… nc å‘½ä»¤ï¼Œä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@hadoop001 bin<span class="token punctuation">]</span><span class="token comment"># echo stat | nc localhost 2181</span>
Zookeeper version: <span class="token number">3.4</span>.13-2d71af4dbe22557fda74f9a9b4309b15a7487f03,
built on 06/29/2018 04:05 GMT
Clients:
 /0:0:0:0:0:0:0:1:50584<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span>queued<span class="token operator">=</span><span class="token number">0</span>,recved<span class="token operator">=</span><span class="token number">371</span>,sent<span class="token operator">=</span><span class="token number">371</span><span class="token punctuation">)</span>
 /0:0:0:0:0:0:0:1:50656<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>queued<span class="token operator">=</span><span class="token number">0</span>,recved<span class="token operator">=</span><span class="token number">1</span>,sent<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Latency min/avg/max: <span class="token number">0</span>/0/19
Received: <span class="token number">372</span>
Sent: <span class="token number">371</span>
Connections: <span class="token number">2</span>
Outstanding: <span class="token number">0</span>
Zxid: 0x150
Mode: standalone
Node count: <span class="token number">167</span>
</code></pre></div><h2 id="_4-å‚è€ƒèµ„æ–™"><a href="#_4-å‚è€ƒèµ„æ–™" class="header-anchor">#</a> 4. å‚è€ƒèµ„æ–™</h2> <ul><li><a href="https://www.w3cschool.cn/zookeeper/zookeeper_installation.html" target="_blank" rel="noopener noreferrer">Zookeeper å®‰è£…<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/heibaiying/BigData-Notes/blob/master/notes/installation/Zookeeper%E5%8D%95%E6%9C%BA%E7%8E%AF%E5%A2%83%E5%92%8C%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.md" target="_blank" rel="noopener noreferrer">Zookeeper å•æœºç¯å¢ƒå’Œé›†ç¾¤ç¯å¢ƒæ­å»º<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javatech/edit/master/docs/soa/zookeeper/zookeeper-ops.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/javatech/assets/js/app.fda27f19.js" defer></script><script src="/javatech/assets/js/4.712970d0.js" defer></script><script src="/javatech/assets/js/60.c674f4b5.js" defer></script>
  </body>
</html>
