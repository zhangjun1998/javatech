<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mockito 应用指南 | JAVATECH</title>
    <meta name="description" content="Java 教程">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/javatech/favicon.ico">
    
    <link rel="preload" href="/javatech/assets/css/0.styles.0a04ceb6.css" as="style"><link rel="preload" href="/javatech/assets/js/app.fda27f19.js" as="script"><link rel="preload" href="/javatech/assets/js/4.712970d0.js" as="script"><link rel="preload" href="/javatech/assets/js/68.9e1d5c1a.js" as="script"><link rel="prefetch" href="/javatech/assets/js/10.27a69910.js"><link rel="prefetch" href="/javatech/assets/js/11.9a90a5e0.js"><link rel="prefetch" href="/javatech/assets/js/12.82ee8f23.js"><link rel="prefetch" href="/javatech/assets/js/13.01fa60c7.js"><link rel="prefetch" href="/javatech/assets/js/14.289ce03a.js"><link rel="prefetch" href="/javatech/assets/js/15.20146332.js"><link rel="prefetch" href="/javatech/assets/js/16.31002576.js"><link rel="prefetch" href="/javatech/assets/js/17.91db155d.js"><link rel="prefetch" href="/javatech/assets/js/18.beb24a84.js"><link rel="prefetch" href="/javatech/assets/js/19.9b63c8bd.js"><link rel="prefetch" href="/javatech/assets/js/20.7b3dd7ca.js"><link rel="prefetch" href="/javatech/assets/js/21.32da2e20.js"><link rel="prefetch" href="/javatech/assets/js/22.e98e166c.js"><link rel="prefetch" href="/javatech/assets/js/23.2de495ed.js"><link rel="prefetch" href="/javatech/assets/js/24.934d13fa.js"><link rel="prefetch" href="/javatech/assets/js/25.d8a9ef4b.js"><link rel="prefetch" href="/javatech/assets/js/26.3e60b6e9.js"><link rel="prefetch" href="/javatech/assets/js/27.03a4cf85.js"><link rel="prefetch" href="/javatech/assets/js/28.85c4983b.js"><link rel="prefetch" href="/javatech/assets/js/29.cfb40647.js"><link rel="prefetch" href="/javatech/assets/js/30.b4406b0c.js"><link rel="prefetch" href="/javatech/assets/js/31.721e5fce.js"><link rel="prefetch" href="/javatech/assets/js/32.61d9d888.js"><link rel="prefetch" href="/javatech/assets/js/33.2e2c17a0.js"><link rel="prefetch" href="/javatech/assets/js/34.a0f94a57.js"><link rel="prefetch" href="/javatech/assets/js/35.609e175d.js"><link rel="prefetch" href="/javatech/assets/js/36.650baca2.js"><link rel="prefetch" href="/javatech/assets/js/37.59188234.js"><link rel="prefetch" href="/javatech/assets/js/38.c3e47159.js"><link rel="prefetch" href="/javatech/assets/js/39.f7622bcc.js"><link rel="prefetch" href="/javatech/assets/js/40.bf0b8425.js"><link rel="prefetch" href="/javatech/assets/js/41.f86852ed.js"><link rel="prefetch" href="/javatech/assets/js/42.058e48bd.js"><link rel="prefetch" href="/javatech/assets/js/43.ecce35ee.js"><link rel="prefetch" href="/javatech/assets/js/44.52f28acf.js"><link rel="prefetch" href="/javatech/assets/js/45.20f4f377.js"><link rel="prefetch" href="/javatech/assets/js/46.0a0260b9.js"><link rel="prefetch" href="/javatech/assets/js/47.eb304074.js"><link rel="prefetch" href="/javatech/assets/js/48.4b44c17f.js"><link rel="prefetch" href="/javatech/assets/js/49.7eb565e9.js"><link rel="prefetch" href="/javatech/assets/js/5.a5e63d96.js"><link rel="prefetch" href="/javatech/assets/js/50.8109a7ae.js"><link rel="prefetch" href="/javatech/assets/js/51.38b085ba.js"><link rel="prefetch" href="/javatech/assets/js/52.00ce2cbc.js"><link rel="prefetch" href="/javatech/assets/js/53.d6d7f478.js"><link rel="prefetch" href="/javatech/assets/js/54.dfdb8d1e.js"><link rel="prefetch" href="/javatech/assets/js/55.1826944b.js"><link rel="prefetch" href="/javatech/assets/js/56.66dbda5d.js"><link rel="prefetch" href="/javatech/assets/js/57.40473993.js"><link rel="prefetch" href="/javatech/assets/js/58.22b1ebc5.js"><link rel="prefetch" href="/javatech/assets/js/59.58783d5e.js"><link rel="prefetch" href="/javatech/assets/js/6.d667bc4d.js"><link rel="prefetch" href="/javatech/assets/js/60.c674f4b5.js"><link rel="prefetch" href="/javatech/assets/js/61.b6341bd9.js"><link rel="prefetch" href="/javatech/assets/js/62.89e2b730.js"><link rel="prefetch" href="/javatech/assets/js/63.0e1450bd.js"><link rel="prefetch" href="/javatech/assets/js/64.c2b3eaf7.js"><link rel="prefetch" href="/javatech/assets/js/65.4faaada8.js"><link rel="prefetch" href="/javatech/assets/js/66.4c312605.js"><link rel="prefetch" href="/javatech/assets/js/67.bf8d7dc4.js"><link rel="prefetch" href="/javatech/assets/js/69.717b63a7.js"><link rel="prefetch" href="/javatech/assets/js/7.49d24c76.js"><link rel="prefetch" href="/javatech/assets/js/8.319b7672.js"><link rel="prefetch" href="/javatech/assets/js/9.1c70efd1.js"><link rel="prefetch" href="/javatech/assets/js/vendors~flowchart.f5cdfab1.js"><link rel="prefetch" href="/javatech/assets/js/vendors~notification.7414fc30.js">
    <link rel="stylesheet" href="/javatech/assets/css/0.styles.0a04ceb6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/javatech/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="JAVATECH" class="logo"> <span class="site-name can-hide">JAVATECH</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/javatech/framework/" class="nav-link">
  框架
</a></div><div class="nav-item"><a href="/javatech/cache/" class="nav-link">
  缓存
</a></div><div class="nav-item"><a href="/javatech/mq/" class="nav-link">
  消息队列
</a></div><div class="nav-item"><a href="/javatech/search/" class="nav-link">
  搜索引擎
</a></div><div class="nav-item"><a href="/javatech/storage/" class="nav-link">
  存储
</a></div><div class="nav-item"><a href="/javatech/soa/" class="nav-link">
  微服务
</a></div><div class="nav-item"><a href="/javatech/security/" class="nav-link">
  安全
</a></div><div class="nav-item"><a href="/javatech/test/" class="nav-link router-link-active">
  测试
</a></div><div class="nav-item"><a href="/javatech/server/" class="nav-link">
  服务器
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javatech" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/javatech/framework/" class="nav-link">
  框架
</a></div><div class="nav-item"><a href="/javatech/cache/" class="nav-link">
  缓存
</a></div><div class="nav-item"><a href="/javatech/mq/" class="nav-link">
  消息队列
</a></div><div class="nav-item"><a href="/javatech/search/" class="nav-link">
  搜索引擎
</a></div><div class="nav-item"><a href="/javatech/storage/" class="nav-link">
  存储
</a></div><div class="nav-item"><a href="/javatech/soa/" class="nav-link">
  微服务
</a></div><div class="nav-item"><a href="/javatech/security/" class="nav-link">
  安全
</a></div><div class="nav-item"><a href="/javatech/test/" class="nav-link router-link-active">
  测试
</a></div><div class="nav-item"><a href="/javatech/server/" class="nav-link">
  服务器
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javatech/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/javatech" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mockito 应用指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javatech/test/mockito.html#预备知识" class="sidebar-link">预备知识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/javatech/test/mockito.html#使用-mock-对象来进行测试" class="sidebar-link">使用 mock 对象来进行测试</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#单元测试的目标和挑战" class="sidebar-link">单元测试的目标和挑战</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#测试类的分类" class="sidebar-link">测试类的分类</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#mock-对象的产生" class="sidebar-link">Mock 对象的产生</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#使用-mockito-生成-mock-对象" class="sidebar-link">使用 Mockito 生成 Mock 对象</a></li></ul></li><li><a href="/javatech/test/mockito.html#为自己的项目添加-mockito-依赖" class="sidebar-link">为自己的项目添加 Mockito 依赖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#在-gradle-添加-mockito-依赖" class="sidebar-link">在 Gradle 添加 Mockito 依赖</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#在-maven-添加-mockito-依赖" class="sidebar-link">在 Maven 添加 Mockito 依赖</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#在-eclipse-ide-使用-mockito" class="sidebar-link">在 Eclipse IDE 使用 Mockito</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#以-osgi-或者-eclipse-插件形式添加-mockito-依赖" class="sidebar-link">以 OSGi 或者 Eclipse 插件形式添加 Mockito 依赖</a></li></ul></li><li><a href="/javatech/test/mockito.html#使用-mockito-api" class="sidebar-link">使用 Mockito API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#静态引用" class="sidebar-link">静态引用</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#使用-mockito-创建和配置-mock-对象" class="sidebar-link">使用 Mockito 创建和配置 mock 对象</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#配置-mock" class="sidebar-link">配置 mock</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#验证-mock-对象方法是否被调用" class="sidebar-link">验证 mock 对象方法是否被调用</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#使用-spy-封装-java-对象" class="sidebar-link">使用 Spy 封装 java 对象</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#使用-injectmocks-在-mockito-中进行依赖注入" class="sidebar-link">使用 @InjectMocks 在 Mockito 中进行依赖注入</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#捕捉参数" class="sidebar-link">捕捉参数</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#mockito-的限制" class="sidebar-link">Mockito 的限制</a></li></ul></li><li><a href="/javatech/test/mockito.html#在-android-中使用-mockito" class="sidebar-link">在 Android 中使用 Mockito</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/javatech/test/mockito.html#实例：使用-mockito-写一个-instrumented-unit-test" class="sidebar-link">实例：使用 Mockito 写一个 Instrumented Unit Test</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#创建一个测试的-android-应用" class="sidebar-link">创建一个测试的 Android 应用</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#在-app-build-gradle-文件中添加-mockito-依赖" class="sidebar-link">在 app/build.gradle 文件中添加 Mockito 依赖</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#创建测试" class="sidebar-link">创建测试</a></li></ul></li><li><a href="/javatech/test/mockito.html#实例：使用-mockito-创建一个-mock-对象" class="sidebar-link">实例：使用 Mockito 创建一个 mock 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#目标" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#创建一个-twitter-api-的例子" class="sidebar-link">创建一个 Twitter API 的例子</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#模拟-itweet-的实例" class="sidebar-link">模拟 ITweet 的实例</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#验证方法调用" class="sidebar-link">验证方法调用</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#验证" class="sidebar-link">验证</a></li></ul></li><li><a href="/javatech/test/mockito.html#模拟静态方法" class="sidebar-link">模拟静态方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#使用-powermock-来模拟静态方法" class="sidebar-link">使用 Powermock 来模拟静态方法</a></li><li class="sidebar-sub-header"><a href="/javatech/test/mockito.html#用封装的方法代替-powermock" class="sidebar-link">用封装的方法代替 Powermock</a></li></ul></li><li><a href="/javatech/test/mockito.html#引用和引申" class="sidebar-link">引用和引申</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mockito-应用指南"><a href="#mockito-应用指南" class="header-anchor">#</a> Mockito 应用指南</h1> <blockquote><p>Mockito 是一个针对 Java 的 mock 框架。</p></blockquote> <h2 id="预备知识"><a href="#预备知识" class="header-anchor">#</a> 预备知识</h2> <p>如果需要往下学习，你需要先理解 Junit 框架中的单元测试。</p> <p>如果你不熟悉 JUnit，请看 <a href="http://www.vogella.com/tutorials/JUnit/article.html" target="_blank" rel="noopener noreferrer">Junit 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="使用-mock-对象来进行测试"><a href="#使用-mock-对象来进行测试" class="header-anchor">#</a> 使用 mock 对象来进行测试</h2> <h3 id="单元测试的目标和挑战"><a href="#单元测试的目标和挑战" class="header-anchor">#</a> 单元测试的目标和挑战</h3> <p>单元测试的思路是在不涉及依赖关系的情况下测试代码（隔离性），所以测试代码与其他类或者系统的关系应该尽量被消除。一个可行的消除方法是替换掉依赖类（测试替换），也就是说我们可以使用替身来替换掉真正的依赖对象。</p> <h3 id="测试类的分类"><a href="#测试类的分类" class="header-anchor">#</a> 测试类的分类</h3> <ul><li><strong>dummy object</strong> 做为参数传递给方法但是绝对不会被使用。譬如说，这种测试类内部的方法不会被调用，或者是用来填充某个方法的参数。</li> <li><strong>Fake</strong> 是真正接口或抽象类的实现体，但给对象内部实现很简单。譬如说，它存在内存中而不是真正的数据库中。（译者注：<strong>Fake</strong> 实现了真正的逻辑，但它的存在只是为了测试，而不适合于用在产品中。）</li> <li><strong>stub</strong> 类是依赖类的部分方法实现，而这些方法在你测试类和接口的时候会被用到，也就是说 <strong>stub</strong> 类在测试中会被实例化。<strong>stub</strong> 类会回应任何外部测试的调用。<strong>stub</strong> 类有时候还会记录调用的一些信息。</li> <li><strong>mock object</strong> 是指类或者接口的模拟实现，你可以自定义这个对象中某个方法的输出结果。</li></ul> <p>测试替代技术能够在测试中模拟测试类以外对象。因此你可以验证测试类是否响应正常。譬如说，你可以验证在 Mock 对象的某一个方法是否被调用。这可以确保隔离了外部依赖的干扰只测试测试类。</p> <p>我们选择 Mock 对象的原因是因为 Mock 对象只需要少量代码的配置。</p> <h3 id="mock-对象的产生"><a href="#mock-对象的产生" class="header-anchor">#</a> Mock 对象的产生</h3> <p>你可以手动创建一个 Mock 对象或者使用 Mock 框架来模拟这些类，Mock 框架允许你在运行时创建 Mock 对象并且定义它的行为。</p> <p>一个典型的例子是把 Mock 对象模拟成数据的提供者。在正式的生产环境中它会被实现用来连接数据源。但是我们在测试的时候 Mock 对象将会模拟成数据提供者来确保我们的测试环境始终是相同的。</p> <p>Mock 对象可以被提供来进行测试。因此，我们测试的类应该避免任何外部数据的强依赖。</p> <p>通过 Mock 对象或者 Mock 框架，我们可以测试代码中期望的行为。譬如说，验证只有某个存在 Mock 对象的方法是否被调用了。</p> <h3 id="使用-mockito-生成-mock-对象"><a href="#使用-mockito-生成-mock-对象" class="header-anchor">#</a> 使用 Mockito 生成 Mock 对象</h3> <p><em>Mockito</em> 是一个流行 mock 框架，可以和 JUnit 结合起来使用。Mockito 允许你创建和配置 mock 对象。使用 Mockito 可以明显的简化对外部依赖的测试类的开发。</p> <p>一般使用 Mockito 需要执行下面三步</p> <ol><li>模拟并替换测试代码中外部依赖</li> <li>执行测试代码</li> <li>验证测试代码是否被正确的执行 0</li></ol> <h2 id="为自己的项目添加-mockito-依赖"><a href="#为自己的项目添加-mockito-依赖" class="header-anchor">#</a> 为自己的项目添加 Mockito 依赖</h2> <h3 id="在-gradle-添加-mockito-依赖"><a href="#在-gradle-添加-mockito-依赖" class="header-anchor">#</a> 在 Gradle 添加 Mockito 依赖</h3> <p>如果你的项目使用 Gradle 构建，将下面代码加入 Gradle 的构建文件中为自己项目添加 Mockito 依赖</p> <div class="language- extra-class"><pre class="language-text"><code>repositories { jcenter() }
dependencies { testCompile &quot;org.mockito:mockito-core:2.0.57-beta&quot; }
</code></pre></div><h3 id="在-maven-添加-mockito-依赖"><a href="#在-maven-添加-mockito-依赖" class="header-anchor">#</a> 在 Maven 添加 Mockito 依赖</h3> <p>需要在 Maven 声明依赖，您可以在 <a href="http://search.maven.org/" target="_blank" rel="noopener noreferrer">http://search.maven.org<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 网站中搜索 <code>g:&quot;org.mockito&quot;, a:&quot;mockito-core&quot;</code> 来得到具体的声明方式。</p> <h3 id="在-eclipse-ide-使用-mockito"><a href="#在-eclipse-ide-使用-mockito" class="header-anchor">#</a> 在 Eclipse IDE 使用 Mockito</h3> <p>Eclipse IDE 支持 Gradle 和 Maven 两种构建工具，所以在 Eclipse IDE 添加依赖取决你使用的是哪一个构建工具。</p> <h3 id="以-osgi-或者-eclipse-插件形式添加-mockito-依赖"><a href="#以-osgi-或者-eclipse-插件形式添加-mockito-依赖" class="header-anchor">#</a> 以 OSGi 或者 Eclipse 插件形式添加 Mockito 依赖</h3> <p>在 Eclipse RCP 应用依赖通常可以在 p2 update 上得到。Orbit 是一个很好的第三方仓库，我们可以在里面寻找能在 Eclipse 上使用的应用和插件。</p> <p>Orbit 仓库地址：<a href="http://download.eclipse.org/tools/orbit/downloads" target="_blank" rel="noopener noreferrer">http://download.eclipse.org/tools/orbit/downloads<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="使用-mockito-api"><a href="#使用-mockito-api" class="header-anchor">#</a> 使用 Mockito API</h2> <h3 id="静态引用"><a href="#静态引用" class="header-anchor">#</a> 静态引用</h3> <p>如果在代码中静态引用了<code>org.mockito.Mockito.*;</code>，那你你就可以直接调用静态方法和静态变量而不用创建对象，譬如直接调用 mock() 方法。</p> <h3 id="使用-mockito-创建和配置-mock-对象"><a href="#使用-mockito-创建和配置-mock-对象" class="header-anchor">#</a> 使用 Mockito 创建和配置 mock 对象</h3> <p>除了上面所说的使用 mock() 静态方法外，Mockito 还支持通过 <code>@Mock</code> 注解的方式来创建 mock 对象。</p> <p>如果你使用注解，那么必须要实例化 mock 对象。Mockito 在遇到使用注解的字段的时候，会调用<code>MockitoAnnotations.initMocks(this)</code> 来初始化该 mock 对象。另外也可以通过使用<code>@RunWith(MockitoJUnitRunner.class)</code>来达到相同的效果。</p> <p>通过下面的例子我们可以了解到使用<code>@Mock</code> 的方法和<code>MockitoRule</code>规则。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MockitoTest</span>  <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@Mock</span>
        <span class="token class-name">MyDatabase</span> databaseMock<span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

        <span class="token annotation punctuation">@Rule</span> <span class="token keyword">public</span> <span class="token class-name">MockitoRule</span> mockitoRule <span class="token operator">=</span> <span class="token class-name">MockitoJUnit</span><span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

        <span class="token annotation punctuation">@Test</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
                <span class="token class-name">ClassToTest</span> t  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassToTest</span><span class="token punctuation">(</span>databaseMock<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
                <span class="token keyword">boolean</span> check <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;* from t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
                <span class="token function">assertTrue</span><span class="token punctuation">(</span>check<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
                <span class="token function">verify</span><span class="token punctuation">(</span>databaseMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;* from t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>告诉 Mockito 模拟 databaseMock 实例</li> <li>Mockito 通过 @mock 注解创建 mock 对象</li> <li>使用已经创建的 mock 初始化这个类</li> <li>在测试环境下，执行测试类中的代码</li> <li>使用断言确保调用的方法返回值为 true</li> <li>验证 query 方法是否被 <code>MyDatabase</code> 的 mock 对象调用</li></ol> <h3 id="配置-mock"><a href="#配置-mock" class="header-anchor">#</a> 配置 mock</h3> <p>当我们需要配置某个方法的返回值的时候，Mockito 提供了链式的 API 供我们方便的调用</p> <p><code>when(….).thenReturn(….)</code>可以被用来定义当条件满足时函数的返回值，如果你需要定义多个返回值，可以多次定义。当你多次调用函数的时候，Mockito 会根据你定义的先后顺序来返回返回值。Mocks 还可以根据传入参数的不同来定义不同的返回值。譬如说你的函数可以将<code>anyString</code> 或者 <code>anyInt</code>作为输入参数，然后定义其特定的放回值。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Assert</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token comment">//  创建 mock</span>
        <span class="token class-name">MyClass</span> test <span class="token operator">=</span> <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 自定义 getUniqueId() 的返回值</span>
        <span class="token function">when</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span><span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 在测试中使用mock对象</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span><span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 返回多个值</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testMoreThanOneReturnValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">Iterator</span> i<span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">Iterator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;Mockito&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;rocks&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> result<span class="token operator">=</span>i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot; &quot;</span><span class="token operator">+</span>i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 断言</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;Mockito rocks&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如何根据输入来返回值</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testReturnValueDependentOnMethodParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">Comparable</span> c<span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;Mockito&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;Eclipse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 断言</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">&quot;Mockito&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如何让返回值不依赖于输入</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testReturnValueInDependentOnMethodParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">Comparable</span> c<span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token function">anyInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 断言</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">,</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 根据参数类型来返回值</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testReturnValueInDependentOnMethodParameter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">Comparable</span> c<span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token function">isA</span><span class="token punctuation">(</span><span class="token class-name">Todo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 断言</span>
        <span class="token class-name">Todo</span> todo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Todo</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span>todo <span class="token punctuation">,</span>c<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Todo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于无返回值的函数，我们可以使用<code>doReturn(…).when(…).methodCall</code>来获得类似的效果。例如我们想在调用某些无返回值函数的时候抛出异常，那么可以使用<code>doThrow</code> 方法。如下面代码片段所示</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Assert</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token comment">// 下面测试用例描述了如何使用doThrow()方法</span>

<span class="token annotation punctuation">@Test</span><span class="token punctuation">(</span>expected<span class="token operator">=</span><span class="token class-name">IOException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testForIOException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建并配置 mock 对象</span>
        <span class="token class-name">OutputStream</span> mockStream <span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">OutputStream</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">doThrow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IOException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>mockStream<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 使用 mock</span>
        <span class="token class-name">OutputStreamWriter</span> streamWriter<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>mockStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        streamWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="验证-mock-对象方法是否被调用"><a href="#验证-mock-对象方法是否被调用" class="header-anchor">#</a> 验证 mock 对象方法是否被调用</h3> <p>Mockito 会跟踪 mock 对象里面所有的方法和变量。所以我们可以用来验证函数在传入特定参数的时候是否被调用。这种方式的测试称行为测试，行为测试并不会检查函数的返回值，而是检查在传入正确参数时候函数是否被调用。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testVerify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token comment">// 创建并配置 mock 对象</span>
        <span class="token class-name">MyClass</span> test <span class="token operator">=</span> <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">MyClass</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">when</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span><span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 调用mock对象里面的方法并传入参数为12</span>
        test<span class="token punctuation">.</span><span class="token function">testing</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        test<span class="token punctuation">.</span><span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        test<span class="token punctuation">.</span><span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 查看在传入参数为12的时候方法是否被调用</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">testing</span><span class="token punctuation">(</span><span class="token class-name">Matchers</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 方法是否被调用两次</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUniqueId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 其他用来验证函数是否被调用的方法</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>mock<span class="token punctuation">,</span> <span class="token function">never</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;never called&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>mock<span class="token punctuation">,</span> <span class="token function">atLeastOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called at least once&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>mock<span class="token punctuation">,</span> <span class="token function">atLeast</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called at least twice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>mock<span class="token punctuation">,</span> <span class="token function">times</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called five times&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">verify</span><span class="token punctuation">(</span>mock<span class="token punctuation">,</span> <span class="token function">atMost</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token string">&quot;called at most 3 times&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-spy-封装-java-对象"><a href="#使用-spy-封装-java-对象" class="header-anchor">#</a> 使用 Spy 封装 java 对象</h3> <p>@Spy 或者<code>spy()</code>方法可以被用来封装 java 对象。被封装后，除非特殊声明（打桩 <em>stub</em>），否则都会真正的调用对象里面的每一个方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token comment">// Lets mock a LinkedList</span>
<span class="token class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span> spy <span class="token operator">=</span> <span class="token function">spy</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 可用 doReturn() 来打桩</span>
<span class="token function">doReturn</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 下面代码不生效</span>
<span class="token comment">// 真正的方法会被调用</span>
<span class="token comment">// 将会抛出 IndexOutOfBoundsException 的异常，因为 List 为空</span>
<span class="token function">when</span><span class="token punctuation">(</span>spy<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>方法<code>verifyNoMoreInteractions()</code>允许你检查没有其他的方法被调用了。</p> <h3 id="使用-injectmocks-在-mockito-中进行依赖注入"><a href="#使用-injectmocks-在-mockito-中进行依赖注入" class="header-anchor">#</a> 使用 @InjectMocks 在 Mockito 中进行依赖注入</h3> <p>我们也可以使用<code>@InjectMocks</code> 注解来创建对象，它会根据类型来注入对象里面的成员方法和变量。假定我们有 ArticleManager 类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArticleManager</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ArticleDatabase</span> database<span class="token punctuation">;</span>

    <span class="token class-name">ArticleManager</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>user <span class="token operator">=</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">setDatabase</span><span class="token punctuation">(</span><span class="token class-name">ArticleDatabase</span> database<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个类会被 Mockito 构造，而类的成员方法和变量都会被 mock 对象所代替，正如下面的代码片段所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">MockitoJUnitRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArticleManagerTest</span>  <span class="token punctuation">{</span>

       <span class="token annotation punctuation">@Mock</span> <span class="token class-name">ArticleCalculator</span> calculator<span class="token punctuation">;</span>
       <span class="token annotation punctuation">@Mock</span> <span class="token class-name">ArticleDatabase</span> database<span class="token punctuation">;</span>
       <span class="token annotation punctuation">@Most</span> <span class="token class-name">User</span> user<span class="token punctuation">;</span>

       <span class="token annotation punctuation">@Spy</span> <span class="token keyword">private</span> <span class="token class-name">UserProvider</span> userProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConsumerUserProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token annotation punctuation">@InjectMocks</span> <span class="token keyword">private</span> <span class="token class-name">ArticleManager</span> manager<span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

       <span class="token annotation punctuation">@Test</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shouldDoSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token comment">// 假定 ArticleManager 有一个叫 initialize() 的方法被调用了</span>
               <span class="token comment">// 使用 ArticleListener 来调用 addListener 方法</span>
               manager<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

               <span class="token comment">// 验证 addListener 方法被调用</span>
               <span class="token function">verify</span><span class="token punctuation">(</span>database<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token class-name">ArticleListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>创建 ArticleManager 实例并注入 Mock 对象</li></ol> <p>更多的详情可以查看 <a href="http://docs.mockito.googlecode.com/hg/1.9.5/org/mockito/InjectMocks.html" target="_blank" rel="noopener noreferrer">http://docs.mockito.googlecode.com/hg/1.9.5/org/mockito/InjectMocks.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="捕捉参数"><a href="#捕捉参数" class="header-anchor">#</a> 捕捉参数</h3> <p><code>ArgumentCaptor</code>类允许我们在 verification 期间访问方法的参数。得到方法的参数后我们可以使用它进行测试。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>hamcrest</span><span class="token punctuation">.</span><span class="token class-name">Matchers</span><span class="token punctuation">.</span>hasItem<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Assert</span><span class="token punctuation">.</span>assertThat<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>mock<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">.</span>verify<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Arrays</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Rule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">ArgumentCaptor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Captor</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">MockitoJUnit</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">MockitoRule</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MockitoTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Rule</span>
    <span class="token keyword">public</span> <span class="token class-name">MockitoRule</span> rule <span class="token operator">=</span> <span class="token class-name">MockitoJUnit</span><span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Captor</span>
    <span class="token keyword">private</span> <span class="token class-name">ArgumentCaptor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> captor<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">shouldContainCertainListItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> asList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;someElement_test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;someElement&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> mockedList <span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mockedList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>asList<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">verify</span><span class="token punctuation">(</span>mockedList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>captor<span class="token punctuation">.</span><span class="token function">capture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> capturedArgument <span class="token operator">=</span> captor<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertThat</span><span class="token punctuation">(</span>capturedArgument<span class="token punctuation">,</span> <span class="token function">hasItem</span><span class="token punctuation">(</span><span class="token string">&quot;someElement&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="mockito-的限制"><a href="#mockito-的限制" class="header-anchor">#</a> Mockito 的限制</h3> <p>Mockito 当然也有一定的限制。而下面三种数据类型则不能够被测试</p> <ul><li>final classes</li> <li>anonymous classes</li> <li>primitive types</li></ul> <h2 id="在-android-中使用-mockito"><a href="#在-android-中使用-mockito" class="header-anchor">#</a> 在 Android 中使用 Mockito</h2> <p>在 Android 中的 Gradle 构建文件中加入 Mockito 依赖后就可以直接使用 Mockito 了。若想使用 Android Instrumented tests 的话，还需要添加 dexmaker 和 dexmaker-mockito 依赖到 Gradle 的构建文件中。（需要 Mockito 1.9.5 版本以上）</p> <div class="language-java extra-class"><pre class="language-java"><code>dependencies <span class="token punctuation">{</span>
    testCompile <span class="token string">'junit:junit:4.12'</span>
    <span class="token comment">// Mockito unit test 的依赖</span>
    testCompile <span class="token string">'org.mockito:mockito-core:1.+'</span>
    <span class="token comment">// Mockito Android instrumentation tests 的依赖</span>
    androidTestCompile <span class="token string">'org.mockito:mockito-core:1.+'</span>
    androidTestCompile <span class="token string">&quot;com.google.dexmaker:dexmaker:1.2&quot;</span>
    androidTestCompile <span class="token string">&quot;com.google.dexmaker:dexmaker-mockito:1.2&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="实例：使用-mockito-写一个-instrumented-unit-test"><a href="#实例：使用-mockito-写一个-instrumented-unit-test" class="header-anchor">#</a> 实例：使用 Mockito 写一个 Instrumented Unit Test</h2> <h3 id="创建一个测试的-android-应用"><a href="#创建一个测试的-android-应用" class="header-anchor">#</a> 创建一个测试的 Android 应用</h3> <p>创建一个包名为<code>com.vogella.android.testing.mockito.contextmock</code>的 Android 应用，添加一个静态方法 ，方法里面创建一个包含参数的 Intent，如下代码所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Intent</span> <span class="token function">createQuery</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">String</span> query<span class="token punctuation">,</span> <span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 简单起见，重用MainActivity</span>
    <span class="token class-name">Intent</span> i <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">&quot;QUERY&quot;</span><span class="token punctuation">,</span> query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">&quot;VALUE&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="在-app-build-gradle-文件中添加-mockito-依赖"><a href="#在-app-build-gradle-文件中添加-mockito-依赖" class="header-anchor">#</a> 在 app/build.gradle 文件中添加 Mockito 依赖</h3> <div class="language-java extra-class"><pre class="language-java"><code>dependencies <span class="token punctuation">{</span>
    <span class="token comment">// Mockito 和 JUnit 的依赖</span>
    <span class="token comment">// instrumentation unit tests on the JVM</span>
    androidTestCompile <span class="token string">'junit:junit:4.12'</span>
    androidTestCompile <span class="token string">'org.mockito:mockito-core:2.0.57-beta'</span>
    androidTestCompile <span class="token string">'com.android.support.test:runner:0.3'</span>
    androidTestCompile <span class="token string">&quot;com.google.dexmaker:dexmaker:1.2&quot;</span>
    androidTestCompile <span class="token string">&quot;com.google.dexmaker:dexmaker-mockito:1.2&quot;</span>

    <span class="token comment">// Mockito 和 JUnit 的依赖</span>
    <span class="token comment">// tests on the JVM</span>
    testCompile <span class="token string">'junit:junit:4.12'</span>
    testCompile <span class="token string">'org.mockito:mockito-core:1.+'</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="创建测试"><a href="#创建测试" class="header-anchor">#</a> 创建测试</h3> <p>使用 Mockito 创建一个单元测试来验证在传递正确 extra data 的情况下，intent 是否被触发。</p> <p>因此我们需要使用 Mockito 来 mock 一个<code>Context</code>对象，如下代码所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>vogella<span class="token punctuation">.</span>android<span class="token punctuation">.</span>testing<span class="token punctuation">.</span>mockitocontextmock</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content</span><span class="token punctuation">.</span><span class="token class-name">Context</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>content</span><span class="token punctuation">.</span><span class="token class-name">Intent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>os</span><span class="token punctuation">.</span><span class="token class-name">Bundle</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner</span><span class="token punctuation">.</span><span class="token class-name">RunWith</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>mockito</span><span class="token punctuation">.</span><span class="token class-name">Mockito</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Assert</span><span class="token punctuation">.</span>assertEquals<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>junit</span><span class="token punctuation">.</span><span class="token class-name">Assert</span><span class="token punctuation">.</span>assertNotNull<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TextIntentCreation</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testIntentShouldBeCreated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token class-name">Mockito</span><span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token function">createQuery</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bundle</span> extras <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>extras<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;query&quot;</span><span class="token punctuation">,</span> extras<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;QUERY&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> extras<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;VALUE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="实例：使用-mockito-创建一个-mock-对象"><a href="#实例：使用-mockito-创建一个-mock-对象" class="header-anchor">#</a> 实例：使用 Mockito 创建一个 mock 对象</h2> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <p>创建一个 Api，它可以被 Mockito 来模拟并做一些工作</p> <h3 id="创建一个-twitter-api-的例子"><a href="#创建一个-twitter-api-的例子" class="header-anchor">#</a> 创建一个 Twitter API 的例子</h3> <p>实现 <code>TwitterClient</code>类，它内部使用到了 <code>ITweet</code> 的实现。但是<code>ITweet</code>实例很难得到，譬如说他需要启动一个很复杂的服务来得到。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ITweet</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TwitterClient</span> <span class="token punctuation">{</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendTweet</span><span class="token punctuation">(</span><span class="token class-name">ITweet</span> tweet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> message <span class="token operator">=</span> tweet<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// send the message to Twitter</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="模拟-itweet-的实例"><a href="#模拟-itweet-的实例" class="header-anchor">#</a> 模拟 ITweet 的实例</h3> <p>为了能够不启动复杂的服务来得到 <code>ITweet</code>，我们可以使用 Mockito 来模拟得到该实例。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSendingTweet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TwitterClient</span> twitterClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TwitterClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ITweet</span> iTweet <span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">ITweet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">when</span><span class="token punctuation">(</span>iTweet<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;Using mockito is great&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        twitterClient<span class="token punctuation">.</span><span class="token function">sendTweet</span><span class="token punctuation">(</span>iTweet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在 <code>TwitterClient</code> 可以使用 <code>ITweet</code> 接口的实现，当调用 <code>getMessage()</code> 方法的时候将会打印 &quot;Using Mockito is great&quot; 信息。</p> <h3 id="验证方法调用"><a href="#验证方法调用" class="header-anchor">#</a> 验证方法调用</h3> <p>确保 getMessage() 方法至少调用一次。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSendingTweet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TwitterClient</span> twitterClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TwitterClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ITweet</span> iTweet <span class="token operator">=</span> <span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">ITweet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">when</span><span class="token punctuation">(</span>iTweet<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token string">&quot;Using mockito is great&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        twitterClient<span class="token punctuation">.</span><span class="token function">sendTweet</span><span class="token punctuation">(</span>iTweet<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">verify</span><span class="token punctuation">(</span>iTweet<span class="token punctuation">,</span> <span class="token function">atLeastOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="验证"><a href="#验证" class="header-anchor">#</a> 验证</h3> <p>运行测试，查看代码是否测试通过。</p> <h2 id="模拟静态方法"><a href="#模拟静态方法" class="header-anchor">#</a> 模拟静态方法</h2> <h3 id="使用-powermock-来模拟静态方法"><a href="#使用-powermock-来模拟静态方法" class="header-anchor">#</a> 使用 Powermock 来模拟静态方法</h3> <p>因为 Mockito 不能够 mock 静态方法，因此我们可以使用 <code>Powermock</code>。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net</span><span class="token punctuation">.</span><span class="token class-name">InetAddress</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>net</span><span class="token punctuation">.</span><span class="token class-name">UnknownHostException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">NetworkReader</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getLocalHostname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> hostname <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">InetAddress</span> addr <span class="token operator">=</span> <span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Get hostname</span>
            hostname <span class="token operator">=</span> addr<span class="token punctuation">.</span><span class="token function">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span> <span class="token class-name">UnknownHostException</span> e <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> hostname<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们模拟了 NetworkReader 的依赖，如下代码所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner</span><span class="token punctuation">.</span><span class="token class-name">RunWith</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>powermock<span class="token punctuation">.</span>core<span class="token punctuation">.</span>classloader<span class="token punctuation">.</span>annotations</span><span class="token punctuation">.</span><span class="token class-name">PrepareForTest</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span> <span class="token class-name">PowerMockRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">)</span>
<span class="token annotation punctuation">@PrepareForTest</span><span class="token punctuation">(</span> <span class="token class-name">NetworkReader</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTest</span> <span class="token punctuation">{</span>

<span class="token comment">// 测试代码</span>

 <span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">mockStatic</span><span class="token punctuation">(</span> <span class="token class-name">NetworkUtil</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">when</span><span class="token punctuation">(</span> <span class="token class-name">NetworkReader</span><span class="token punctuation">.</span><span class="token function">getLocalHostname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">andReturn</span><span class="token punctuation">(</span> <span class="token string">&quot;localhost&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 与 NetworkReader 协作的测试</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="用封装的方法代替-powermock"><a href="#用封装的方法代替-powermock" class="header-anchor">#</a> 用封装的方法代替 Powermock</h3> <p>有时候我们可以在静态方法周围包含非静态的方法来达到和 Powermock 同样的效果。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">FooWraper</span> <span class="token punctuation">{</span>
      <span class="token keyword">void</span> <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token class-name">Foo</span><span class="token punctuation">.</span><span class="token function">someStaticMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="引用和引申"><a href="#引用和引申" class="header-anchor">#</a> 引用和引申</h2> <ul><li><a href="https://site.mockito.org/" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/mockito/mockito" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/xitu/gold-miner/blob/master/TODO/Unit-tests-with-Mockito.md" target="_blank" rel="noopener noreferrer">使用强大的 Mockito 测试框架来测试你的代码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/javatech/edit/master/docs/test/mockito.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/javatech/assets/js/app.fda27f19.js" defer></script><script src="/javatech/assets/js/4.712970d0.js" defer></script><script src="/javatech/assets/js/68.9e1d5c1a.js" defer></script>
  </body>
</html>
